## Invoke with: bundle exec fastlane ios build --env ios.testflight
## Deploy with: bundle exec fastlane ios deploy --env ios.testflight
## Or use the script: ./scripts/deploy-testflight.sh

# App Identity
APP_NAME="Mattermost+"
APP_SCHEME=mattermost
MAIN_APP_IDENTIFIER=com.yourcompany.mattermost-extended
EXTENSION_APP_IDENTIFIER=com.yourcompany.mattermost-extended.MattermostShare
NOTIFICATION_SERVICE_IDENTIFIER=com.yourcompany.mattermost-extended.NotificationService

# App Groups & iCloud
IOS_APP_GROUP=group.com.yourcompany.mattermost-extended
IOS_ICLOUD_CONTAINER=iCloud.com.yourcompany.mattermost-extended

# Code Signing (Fastlane Match)
MATCH_APP_IDENTIFIER=com.yourcompany.mattermost-extended,com.yourcompany.mattermost-extended.MattermostShare,com.yourcompany.mattermost-extended.NotificationService
MATCH_GIT_URL=git@github.com:yourcompany/fastlane-certs.git
MATCH_READONLY=false
MATCH_SHALLOW_CLONE=true
MATCH_SKIP_DOCS=true
MATCH_TYPE=appstore
MATCH_PASSWORD=your-match-password-here
SYNC_PROVISIONING_PROFILES=true
TEAM_ID=YOUR_TEAM_ID

# Build Settings
BETA_BUILD=true
BUILD_FOR_RELEASE=true
IOS_BUILD_EXPORT_METHOD=app-store
FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT=120
FASTLANE_XCODEBUILD_SETTINGS_RETRIES=6

# App Store Connect API
# Create an API key at: https://appstoreconnect.apple.com/access/api
APP_STORE_CONNECT_API_KEY_PATH=/path/to/your/fastlane/api_key.json
IOS_API_KEY_ID=YOUR_KEY_ID
IOS_API_ISSUER_ID=your-issuer-id-here

# TestFlight
PILOT_SKIP_WAITING_FOR_BUILD_PROCESSING=true

# App Store Connect App ID (optional - for direct TestFlight link after deploy)
# Find this in App Store Connect URL: https://appstoreconnect.apple.com/apps/YOUR_APP_ID
# APP_STORE_APP_ID=123456789

# Optional Features (disabled for simplicity)
REPLACE_ASSETS=false
SENTRY_ENABLED=false
INTUNE_ENABLED=false
COLLECT_NETWORK_METRICS=false
SHOW_ONBOARDING=true
